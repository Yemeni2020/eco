{
  "info": {
    "name": "Eco Store API v1",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Sara\",\"email\":\"sara@example.com\",\"password\":\"secret123\",\"password_confirmation\":\"secret123\"}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/auth/register"
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"demo@example.com\",\"password\":\"password\"}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/auth/login"
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/auth/logout"
          }
        },
        {
          "name": "Me",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/auth/me"
          }
        }
      ]
    },
    {
      "name": "Addresses",
      "item": [
        {
          "name": "List Addresses",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/addresses"
          }
        },
        {
          "name": "Create Address",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Sara\",\"phone\":\"0551234567\",\"city\":\"Riyadh\",\"district\":\"Olaya\",\"street\":\"King Fahd Rd\",\"postal_code\":\"12345\",\"notes\":\"\",\"is_default\":true}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/addresses"
          }
        },
        {
          "name": "Update Address",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"district\":\"Al Malaz\",\"is_default\":false}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/addresses/{{addressId}}"
          }
        },
        {
          "name": "Delete Address",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/addresses/{{addressId}}"
          }
        }
      ]
    },
    {
      "name": "Catalog",
      "item": [
        {
          "name": "List Categories",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/v1/categories"
          }
        },
        {
          "name": "List Products",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/v1/products?search=&category=&sort=newest&minPrice=&maxPrice=&page=1"
          }
        },
        {
          "name": "Product Details",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/v1/products/{{productSlug}}"
          }
        }
      ]
    },
    {
      "name": "Cart",
      "item": [
        {
          "name": "Get Cart",
          "request": {
            "method": "GET",
            "header": [
              { "key": "X-Session-Id", "value": "{{sessionId}}" }
            ],
            "url": "{{baseUrl}}/api/v1/cart"
          }
        },
        {
          "name": "Add Cart Item",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "X-Session-Id", "value": "{{sessionId}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"product_id\":{{productId}},\"qty\":2}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/cart/items"
          }
        },
        {
          "name": "Update Cart Item Qty",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "X-Session-Id", "value": "{{sessionId}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"qty\":3}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/cart/items/{{cartItemId}}"
          }
        },
        {
          "name": "Remove Cart Item",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "X-Session-Id", "value": "{{sessionId}}" }
            ],
            "url": "{{baseUrl}}/api/v1/cart/items/{{cartItemId}}"
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Quote Totals",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/checkout/quote"
          }
        },
        {
          "name": "Create Order",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"shipping_address_id\":1,\"billing_address_id\":null,\"payment_method\":\"mada\",\"notes\":\"\"}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/orders"
          }
        },
        {
          "name": "List Orders",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/orders"
          }
        },
        {
          "name": "Order Details",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/orders/{{orderId}}"
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Init Payment",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"provider\":\"mada\"}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/payments/{{orderId}}/init"
          }
        },
        {
          "name": "Payment Status",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/api/v1/payments/{{orderId}}/status"
          }
        },
        {
          "name": "Webhook Mada",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "X-Webhook-Secret", "value": "secret" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"reference\":\"MADA-REF\",\"order_number\":\"ORD-1234\",\"status\":\"paid\",\"amount\":100,\"currency\":\"SAR\"}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/payments/webhook/mada"
          }
        },
        {
          "name": "Webhook STC Pay",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "X-Webhook-Secret", "value": "secret" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"reference\":\"STCPAY-REF\",\"order_number\":\"ORD-1234\",\"status\":\"paid\",\"amount\":100,\"currency\":\"SAR\"}",
              "options": { "raw": { "language": "json" } }
            },
            "url": "{{baseUrl}}/api/v1/payments/webhook/stcpay"
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:8000" },
    { "key": "token", "value": "" },
    { "key": "sessionId", "value": "demo-session" },
    { "key": "productId", "value": "1" },
    { "key": "productSlug", "value": "sample-product" },
    { "key": "cartItemId", "value": "1" },
    { "key": "orderId", "value": "1" },
    { "key": "addressId", "value": "1" }
  ]
}
